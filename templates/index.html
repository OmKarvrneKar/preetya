<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News Classifier - Fake vs Real</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 800px;
            width: 100%;
            padding: 40px;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
            font-size: 1.1em;
        }

        .input-section {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            color: #333;
            font-weight: 600;
            font-size: 1.1em;
        }

        textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            min-height: 150px;
            transition: border-color 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .button-section {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        button {
            flex: 1;
            padding: 15px;
            font-size: 1.1em;
            font-weight: 600;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        #predictBtn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        #predictBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
        }

        #predictBtn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        #clearBtn {
            background: #f0f0f0;
            color: #333;
        }

        #clearBtn:hover {
            background: #e0e0e0;
        }

        .result-section {
            display: none;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            animation: slideIn 0.4s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-section.show {
            display: block;
        }

        .result-section.fake {
            background: #ffebee;
            border: 2px solid #ef5350;
        }

        .result-section.real {
            background: #e8f5e9;
            border: 2px solid #66bb6a;
        }

        .result-label {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .result-label.fake {
            color: #c62828;
        }

        .result-label.real {
            color: #2e7d32;
        }

        .confidence {
            font-size: 1.2em;
            color: #555;
            margin-bottom: 15px;
        }

        .probabilities {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }

        .prob-item {
            flex: 1;
            padding: 15px;
            background: white;
            border-radius: 8px;
            text-align: center;
        }

        .prob-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 5px;
        }

        .prob-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #667eea;
        }

        .error {
            background: #ffebee;
            border: 2px solid #ef5350;
            color: #c62828;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            display: none;
        }

        .error.show {
            display: block;
        }

        .loader {
            display: none;
            text-align: center;
            margin-top: 20px;
        }

        .loader.show {
            display: block;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .examples {
            margin-top: 30px;
            padding: 20px;
            background: #f5f5f5;
            border-radius: 10px;
        }

        .examples h3 {
            margin-bottom: 15px;
            color: #333;
        }

        .example-btn {
            display: inline-block;
            padding: 8px 15px;
            margin: 5px;
            background: white;
            border: 2px solid #667eea;
            color: #667eea;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
        }

        .example-btn:hover {
            background: #667eea;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üì∞ News Classifier</h1>
        <p class="subtitle">Detect Fake vs Real News using Machine Learning</p>

        <div class="input-section">
            <label for="newsText">Enter News Article:</label>
            <textarea 
                id="newsText" 
                placeholder="Paste or type a news article here to check if it's fake or real..."
            ></textarea>
        </div>

        <div class="button-section">
            <button id="predictBtn">üîç Analyze News</button>
            <button id="clearBtn">üóëÔ∏è Clear</button>
        </div>

        <div class="loader" id="loader">
            <div class="spinner"></div>
            <p>Analyzing...</p>
        </div>

        <div class="error" id="error"></div>

        <div class="result-section" id="result">
            <div class="result-label" id="resultLabel"></div>
            <div class="confidence" id="confidence"></div>
            <div class="probabilities" id="probabilities"></div>
        </div>

        <div class="examples">
            <h3>üìù Try Examples:</h3>
            <button class="example-btn" onclick="loadExample(1)">Example 1</button>
            <button class="example-btn" onclick="loadExample(2)">Example 2</button>
        </div>
    </div>

    <script>
        const examples = {
            1: "Scientists have discovered a groundbreaking treatment for cancer. The new therapy, developed by researchers at a major university, has shown promising results in clinical trials. The treatment targets specific cancer cells while leaving healthy cells intact.",
            2: "BREAKING: World leaders confirm that aliens have landed on Earth! The government has been hiding this information for decades. Click here to see the shocking photos that they don't want you to see!"
        };

        function loadExample(num) {
            document.getElementById('newsText').value = examples[num];
            document.getElementById('result').classList.remove('show');
            document.getElementById('error').classList.remove('show');
        }

        document.getElementById('predictBtn').addEventListener('click', async () => {
            const text = document.getElementById('newsText').value.trim();
            const predictBtn = document.getElementById('predictBtn');
            const loader = document.getElementById('loader');
            const result = document.getElementById('result');
            const error = document.getElementById('error');

            if (!text) {
                error.textContent = 'Please enter some text to analyze.';
                error.classList.add('show');
                return;
            }

            // Hide previous results
            result.classList.remove('show');
            error.classList.remove('show');

            // Show loader
            loader.classList.add('show');
            predictBtn.disabled = true;

            try {
                const response = await fetch('/predict', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ text: text })
                });

                const data = await response.json();

                if (!response.ok) {
                    throw new Error(data.error || 'Prediction failed');
                }

                // Display result
                const isFake = data.prediction.toLowerCase() === 'fake';
                result.className = 'result-section show ' + (isFake ? 'fake' : 'real');
                
                document.getElementById('resultLabel').textContent = 
                    'üîé Prediction: ' + data.prediction.toUpperCase();
                document.getElementById('resultLabel').className = 
                    'result-label ' + (isFake ? 'fake' : 'real');
                
                document.getElementById('confidence').textContent = 
                    'üìä Confidence: ' + data.confidence + '%';

                // Display probabilities
                const probHtml = Object.entries(data.probabilities)
                    .map(([label, prob]) => `
                        <div class="prob-item">
                            <div class="prob-label">${label.charAt(0).toUpperCase() + label.slice(1)}</div>
                            <div class="prob-value">${(prob * 100).toFixed(1)}%</div>
                        </div>
                    `).join('');
                
                document.getElementById('probabilities').innerHTML = probHtml;

            } catch (err) {
                error.textContent = '‚ùå Error: ' + err.message;
                error.classList.add('show');
            } finally {
                loader.classList.remove('show');
                predictBtn.disabled = false;
            }
        });

        document.getElementById('clearBtn').addEventListener('click', () => {
            document.getElementById('newsText').value = '';
            document.getElementById('result').classList.remove('show');
            document.getElementById('error').classList.remove('show');
        });

        // Allow Enter key to submit (Ctrl+Enter)
        document.getElementById('newsText').addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.key === 'Enter') {
                document.getElementById('predictBtn').click();
            }
        });
    </script>
</body>
</html>
